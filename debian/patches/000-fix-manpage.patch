Description: <fix manpage and rebuild with new package format>
 .
 dhcpdump (1.8-3) unstable; urgency=low
 .
   * New-maintainer upload. (Closes: #934419)
   * Fix the manpage,dhcpdump does not parse the output of tcpdump
     but analyze and display it. (Closes: #647228)
Author: Peter Ji <peter_jay@yeah.net>
Bug-Debian: https://bugs.debian.org/647228
Bug-Debian: https://bugs.debian.org/934419

---
The information above should follow the Patch Tagging Guidelines, please
checkout http://dep.debian.net/deps/dep3/ to learn about the format. Here
are templates for supplementary fields that you might want to add:

Origin: <vendor|upstream|other>, <url of original patch>
Bug: <url in upstream bugtracker>
Bug-Debian: https://bugs.debian.org/<bugnumber>
Bug-Ubuntu: https://launchpad.net/bugs/<bugnumber>
Forwarded: <no|not-needed|url proving that it has been forwarded>
Reviewed-By: <name and email of someone who approved the patch>
Last-Update: 2020-12-01

--- dhcpdump-1.8.orig/CHANGES
+++ dhcpdump-1.8/CHANGES
@@ -2,6 +2,8 @@ $Id: CHANGES,v 1.11 2004/10/31 11:22:58
 
 version 1.8
 	- Use pcap instead of tcpdump output
+	- Remove support for autofoo
+	- Rebuild use new package format @1.8-3
 
 version 1.7
 	- Support for tcpdump 3.8.x
--- dhcpdump-1.8.orig/Makefile
+++ dhcpdump-1.8/Makefile
@@ -1,11 +1,18 @@
 CFLAGS=	 -Wall -g
-LDFLAGS= -g
+LDFLAGS= -g -pie -fpie -Wl,-z,relro -Wl,-z,now
 LIBS=	-lpcap
+installbin = install -g root -o root -m 755
+installdoc = install -g root -o root -m 644
+BIN_PATH = /usr/bin
+MAN_PATH = /usr/share/man/man8/
 
 all: dhcpdump dhcpdump.8
 
 clean:
 	-rm dhcpdump.o dhcpdump dhcpdump.8
+	-rm  stamp-build
+	-rm  copyright.txt
+	-rm  debian/dhcpdump.8 debian/dhcpdump.manpage
 
 dhcpdump.8: dhcpdump.pod Makefile
 	pod2man --section 8 \
@@ -13,9 +20,19 @@ dhcpdump.8: dhcpdump.pod Makefile
 		--name "DHCPDUMP" \
 		--center "User Contributed Software" \
 		dhcpdump.pod dhcpdump.8
+	cp dhcpdump.8 debian/
+	echo debian/dhcpdump.8 > debian/dhcpdump.manpage
 
 dhcpdump: dhcpdump.o
 	${CC} ${LDFLAGS} -o $@ dhcpdump.o ${LIBS}
 
 dhcpdump.o: dhcpdump.c dhcp_options.h Makefile
 	${CC} ${CFLAGS} -c -o $@ dhcpdump.c
+	touch stamp-build
+	cat debian/copyright LICENSE > copyright.txt
+
+install: all
+	#strip dhcpdump
+	$(installbin) dhcpdump $(BIN_PATH)
+	$(installdoc) dhcpdump.8 $(MAN_PATH)
+	gzip -9n $(MAN_PATH)dhcpdump.8
--- dhcpdump-1.8.orig/dhcp_options.h
+++ dhcpdump-1.8/dhcp_options.h
@@ -118,7 +118,7 @@ const char *dhcp_options[] = {
 /* 107 */	"???",
 /* 108 */	"Swap Path",
 /* 109 */	"???",
-/* 110 */	"IPX Compatability",
+/* 110 */	"IPX Compatibility",
 /* 111 */	"???",
 /* 112 */	"Netinfo Address",
 /* 113 */	"Netinfo Tag",
--- dhcpdump-1.8.orig/dhcpdump.c
+++ dhcpdump-1.8/dhcpdump.c
@@ -91,7 +91,7 @@ int main(int argc, char **argv) {
 			interface = argv[++i];
 			break;
 		default:
-			fprintf(stderr, "%s: %c: uknown option\n",
+			fprintf(stderr, "%s: %c: unknown option\n",
 			    argv[0], argv[i][1]);
 			usage();
 		}
--- dhcpdump-1.8.orig/dhcpdump.pod
+++ dhcpdump-1.8/dhcpdump.pod
@@ -12,15 +12,15 @@ B<dhcpdump> [B<-h> I<regular-expression>
 
 =head1 DESCRIPTION
 
-This command parses the output of tcpdump to display the dhcp-packets for
-easier checking and debugging.
+This command captures the dhcp-packets and display packets after analysis. 
+for easier checking and debugging.
 
 =head1 USAGE
 
 S<dhcpdump -i /dev/fxp0>
 
 If you want to filter a specific Client Hardware Address (CHADDR), then
-you can specifiy it as a regular expressions:
+you can specify it as a regular expressions:
 
 S<dhcpdump -i /dev/fxp0 -h ^00:c0:4f>
 
@@ -71,7 +71,7 @@ Privileged access is often needed for ac
 Not all the parameter options are printed verbose, because of lack of
 documentation. Not all the options are tested, because of lack of
 clients/servers with these options. If you have a dump of one of
-them, please send them to me and I'll incorperate them.
+them, please send them to me and I'll incorporate them.
 
 =head1 THANKS TO
 
